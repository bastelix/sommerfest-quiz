http:
  routers:
    traefik-api:
      entryPoints:
        - traefik
      rule: PathPrefix(`/api`)
      service: api@internal
{{- if env "TRAEFIK_API_BASICAUTH" }}
      middlewares:
        - traefik-api-auth
{{- end }}
{{- if env "TRAEFIK_DASHBOARD_RULE" }}
    traefik-dashboard:
      entryPoints:
        - traefik
      rule: {{ env "TRAEFIK_DASHBOARD_RULE" }}
      service: api@internal
{{- if env "TRAEFIK_API_BASICAUTH" }}
      middlewares:
        - traefik-api-auth
{{- end }}
{{- end }}
{{- if env "TRAEFIK_API_BASICAUTH" }}
  middlewares:
    traefik-api-auth:
      basicAuth:
        removeHeader: true
        users:
          - '{{ env "TRAEFIK_API_BASICAUTH" }}'
{{- end }}
