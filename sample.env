####################
# Beispiel-Konfiguration
####################

# Fester Projektname für Docker Compose.
# Sollte unverändert bleiben, damit Container und Volumes bei Deployments wiederverwendet werden.
COMPOSE_PROJECT_NAME=sommerfest-quiz

# Domain-Routing (z. B. für VIRTUAL_HOST)
DOMAIN=example.com            # Basis-Domain aller Mandanten
MAIN_DOMAIN=quizrace.app      # Hauptdomain des Quiz-Containers
# Komma- oder zeilengetrennte Liste zusätzlicher Marketing-Domains für Landing Pages
# (für TLS-Zertifikate bitte kommagetrennt eintragen)
MARKETING_DOMAINS=
# Zusätzliche Subdomain-Präfixe, die bei der Normalisierung entfernt werden (komma- oder zeilengetrennt)
# Standard: "www admin assistant"
DOMAIN_STRIPPED_PREFIXES=
APP_IMAGE=sommerfest-quiz:latest # Docker-Image für Tenant-Container
# Tag des lokal gebauten Slim-Images (docker build -t <tag> .),
# das vom Onboarding-Skript verwendet wird
SLIM_VIRTUAL_HOST=example.com # Hostname des Quiz-Containers
SLIM_LETSENCRYPT_HOST=        # Optionale zusätzliche Zertifikats-Domains (ohne Regex)
NETWORK=webproxy                # Docker-Netzwerk des Reverse Proxy
NETWORK_EXTERNAL=false          # Auf "true" setzen, falls das Netzwerk extern verwaltet wird
TENANTS_DIR=tenants             # Verzeichnis für Tenant-Compose-Dateien
TENANT_SINGLE_CONTAINER=0       # 1 = alle Mandanten im bestehenden Slim-Container bedienen (Wildcard-Zertifikat in certs/ notwendig)

# Let's Encrypt
LETSENCRYPT_EMAIL=admin@example.com # Kontaktadresse für Zertifikate
# Wildcard-Provisionierung über acme.sh (DNS-Challenge)
ACME_WILDCARD_PROVIDER=       # z. B. dns_cf
#ACME_WILDCARD_ACCOUNT_EMAIL=  # optional, fällt auf LETSENCRYPT_EMAIL zurück
#ACME_WILDCARD_SERVICE=acme-companion
#ACME_WILDCARD_SERVER=         # eigenes ACME-Directory
ACME_WILDCARD_USE_STAGING=0   # 1 = Test-Zertifikate
# Zusätzliche Flags (werden an acme.sh durchgereicht)
#ACME_WILDCARD_ISSUE_FLAGS=""
#ACME_WILDCARD_INSTALL_FLAGS=""
# Zugangsdaten für das DNS-Plugin, z. B. ACME_WILDCARD_ENV_CF_Token, ACME_WILDCARD_ENV_CF_Account_ID
ACME_DEFAULT_CA=letsencrypt    # Standard-CA (letsencrypt, letsencrypt-staging, zerossl, buypass)
#ACME_CA_URI=                  # Überschreibt die ACME-Directory-URL
#ACME_CA_URI_ALTERNATE=        # Optionale alternative Directory-URL
#ACME_EAB_KID=                 # Optional: External-Account-Binding Key ID
#ACME_EAB_HMAC_KEY=            # Optional: External-Account-Binding HMAC-Schlüssel

# PostgreSQL
POSTGRES_DSN=pgsql:host=postgres;dbname=quiz # Datenbank-DSN
POSTGRES_USER=quiz                           # DB-Benutzer
POSTGRES_PASS=quiz                           # veraltet, s. POSTGRES_PASSWORD
POSTGRES_PASSWORD=quiz                       # Passwort des DB-Benutzers
POSTGRES_DB=quiz                             # Datenbankname
POSTGRES_CONNECT_RETRIES=5                   # Anzahl der Verbindungsversuche
POSTGRES_CONNECT_RETRY_DELAY=1               # Startverzögerung (Sekunden, verdoppelt sich nach jedem Fehlversuch)

# Mandantenkennung
TENANT_ID=default

# Fehlerdetails anzeigen? (0 oder 1)
DISPLAY_ERROR_DETAILS=0

# Container-Metriken und PHP-Logging
# Container-Metriken erfassen (RAM/CPU) und OOM-Events loggen
CONTAINER_METRICS_LOGGING=1
CONTAINER_METRICS_LOG_INTERVAL_SECONDS=30
# PHP-Fehlerlog (z. B. Memory Exhausted)
PHP_ERROR_LOG=/proc/self/fd/2

# Optionaler Basis-Pfad (wenn die App nicht im Root liegt)
BASE_PATH=

# Standardwert für client_max_body_size
CLIENT_MAX_BODY_SIZE=50m

# Proxy nach Anlegen eines Tenants neu laden? (0 oder 1)
NGINX_RELOAD=0

# Service-Login für Onboarding
SERVICE_USER=
SERVICE_PASS=
NGINX_RELOAD_TOKEN=changeme
NGINX_CONTAINER=nginx
# Optionale URL für einen externen Reload-Service
NGINX_RELOADER_URL=http://nginx-reloader:8080/reload

# Optionales Request-Logging für Admin-Endpunkte (Timing/Size)
ADMIN_REQUEST_LOGGING=0
ADMIN_REQUEST_LOG_PATH=/var/log/nginx/admin-access.log

# SMTP-Konfiguration
# Entweder klassischen SMTP-Zugang konfigurieren …
SMTP_HOST=smtp.brevo.com
SMTP_PORT=587
SMTP_USER=support@quizrace.app
SMTP_PASS=DEIN_STARKES_PASSWORT
SMTP_ENCRYPTION=none # none|tls|ssl
# … oder einen vollständigen Symfony-Mailer-DSN setzen, der die obigen Werte ersetzt
# Beispiele:
#MAILER_DSN="smtp://support%40quizrace.app:DEIN_STARKES_PASSWORT@smtp.brevo.com:587?encryption=tls"
#MAILER_DSN="mailgun+https://API_KEY:DEINE-DOMAIN@default?region=eu"
#MAILER_DSN="brevo+api://DEIN_API_KEY@default"
#MAILER_DSN="mailchimp+https://DEIN_MANDRILL_KEY@default"
SMTP_FROM="support@quizrace.app"
SMTP_FROM_NAME="QuizRace Support"
# Geheimnis für verschlüsselte Mail-Provider-Konfigurationen (Fallback ist PASSWORD_RESET_SECRET)
MAIL_PROVIDER_SECRET=changeme

# Cloudflare Turnstile Captcha (optional)
TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# Geheimnis zum Hashen von Passwort-Reset-Token
PASSWORD_RESET_SECRET=changeme

# RAG-Chatbot (Marketing-Seite)
#RAG_CHAT_SERVICE_URL=https://chat.example.com/v1/chat
#RAG_CHAT_SERVICE_DRIVER=openai # Required for proxied OpenAI domains such as https://mein-proxy.example/v1/chat/completions
# Standard-Timeout des Responders sind 60 s; der Wert sollte mit Nginx-Proxy-Timeouts für KI-Endpunkte
# (z. B. proxy_read_timeout und proxy_send_timeout für /admin/pages/ai-generate) abgeglichen und ggf. erhöht werden.
#RAG_CHAT_SERVICE_TIMEOUT=60
# When using legacy environments you can still force OpenAI payloads with this boolean flag.
#RAG_CHAT_SERVICE_FORCE_OPENAI=false
#RAG_CHAT_SERVICE_TOKEN=changeme
#RAG_CHAT_SERVICE_MODEL=gpt-5-nano-2025-08-07
#RAG_CHAT_SERVICE_TEMPERATURE=0.2
#RAG_CHAT_SERVICE_TOP_P=1
#RAG_CHAT_SERVICE_MAX_TOKENS=300
#RAG_CHAT_SERVICE_PRESENCE_PENALTY=0
#RAG_CHAT_SERVICE_FREQUENCY_PENALTY=0

# Stripe-Zahlungsanbieter
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
#STRIPE_WEBHOOK_SECRET= # optional
STRIPE_PRICE_STARTER=
STRIPE_PRICE_STANDARD=
STRIPE_PRICE_PROFESSIONAL=
STRIPE_PRICING_TABLE_ID=
STRIPE_CUSTOMER_ID=
STRIPE_TRIAL_DAYS=7

# Sandbox-Optionen (0 oder 1)
STRIPE_SANDBOX=0
STRIPE_SANDBOX_SECRET_KEY=
STRIPE_SANDBOX_PUBLISHABLE_KEY=
STRIPE_SANDBOX_PRICE_STARTER=
STRIPE_SANDBOX_PRICE_STANDARD=
STRIPE_SANDBOX_PRICE_PROFESSIONAL=
STRIPE_SANDBOX_PRICING_TABLE_ID=
STRIPE_SANDBOX_CUSTOMER_ID=

# Feature flags
# Schaltet den Wiki-Bereich auf allen Seiten global frei.
FEATURE_WIKI_ENABLED=true
FEATURE_MARKETING_NAV_TREE_ENABLED=true
