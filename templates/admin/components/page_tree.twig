<div class="uk-card uk-card-default uk-card-body uk-margin">
  <div class="uk-flex uk-flex-between uk-flex-middle uk-flex-wrap">
    <h3 class="uk-card-title uk-margin-remove">Seitenbaum</h3>
    <span class="uk-text-meta">Namespace · Typ</span>
  </div>
  <p class="uk-text-meta uk-margin-small-top">
    Strukturierte Übersicht der Seiten inklusive Parent-Beziehungen.
  </p>
  <div
    class="page-tree"
    data-page-tree
    data-endpoint="{{ basePath }}/admin/pages/tree"
    data-namespace="{{ pageNamespace|default('default')|e('html_attr') }}"
    data-empty="Keine Seiten vorhanden."
    data-error="Seitenbaum konnte nicht geladen werden."
  >
    <div class="uk-text-meta" data-page-tree-loading>Seitenbaum wird geladen…</div>
  </div>
</div>

{% set pageNamespaceOptions = available_namespaces|default([]) %}
{% if pageNamespaceOptions is empty %}
  {% set pageNamespaceOptions = [{
    namespace: pageNamespace|default('default'),
    label: null,
    is_active: true
  }] %}
{% endif %}
<div id="pageNamespaceActionModal" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <h2 class="uk-modal-title">{{ t('heading_page_namespace_action') }}</h2>
    <form id="pageNamespaceActionForm" class="uk-form-stacked">
      <div class="uk-alert uk-alert-danger" data-page-namespace-feedback hidden></div>
      <p class="uk-text-meta uk-margin-small-bottom" data-page-namespace-title></p>
      <input type="hidden" name="page_slug" value="">
      <div class="uk-margin">
        <label class="uk-form-label" for="pageNamespaceActionSelect">{{ t('label_page_namespace_action') }}</label>
        <div class="uk-form-controls">
          <select id="pageNamespaceActionSelect" class="uk-select" name="page_action" required>
            <option value="" selected disabled>{{ t('placeholder_page_namespace_action') }}</option>
            <option value="copy">{{ t('action_copy') }}</option>
            <option value="move">{{ t('action_move') }}</option>
          </select>
        </div>
      </div>
      <div class="uk-margin">
        <label class="uk-form-label" for="pageNamespaceTargetSelect">{{ t('label_target_namespace') }}</label>
        <div class="uk-form-controls">
          <select id="pageNamespaceTargetSelect" class="uk-select" name="target_namespace" required>
            {% for entry in pageNamespaceOptions %}
              {% set entryNamespace = entry.namespace|default('') %}
              {% set entryLabel = entry.label|default('') %}
              {% set entryIsInactive = entry.is_active is defined and not entry.is_active %}
              <option value="{{ entryNamespace|e('html_attr') }}">
                {{ entryNamespace }}
                {% if entryLabel is not empty %} – {{ entryLabel }}{% endif %}
                {% if entryIsInactive %} – inaktiv{% endif %}
              </option>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="uk-flex uk-flex-right">
        <button type="submit" class="uk-button uk-button-primary">{{ t('action_apply') }}</button>
        <button type="button" class="uk-button uk-button-default uk-margin-small-left uk-modal-close">
          {{ t('action_cancel') }}
        </button>
      </div>
    </form>
  </div>
</div>
