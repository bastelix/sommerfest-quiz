<div class="uk-card uk-card-default uk-card-body uk-margin">
  <div class="uk-flex uk-flex-between uk-flex-middle uk-flex-wrap">
    <h3 class="uk-card-title uk-margin-remove">Seitenbaum</h3>
    <div class="uk-flex uk-flex-middle uk-flex-wrap">
      <span class="uk-text-meta uk-margin-small-right">{{ t('label_project_namespace') }} · {{ t('column_domain_type') }}</span>
      <button
        class="uk-button uk-button-default uk-button-small uk-margin-small-left"
        type="button"
        uk-toggle="target: #createPageModal"
      >Neue Seite</button>
      <button
        class="uk-button uk-button-primary uk-button-small uk-margin-small-left"
        type="button"
        uk-toggle="target: #aiPageModal"
      >{{ t('action_ai_page_create') }}</button>
    </div>
  </div>
  <p class="uk-text-meta uk-margin-small-top">
    Strukturierte Übersicht der Seiten inklusive Parent-Beziehungen.
  </p>
  {% if hasDomainNamespace|default(false) and startpage_domain_options|default([])|length > 1 %}
  <div class="uk-grid-small uk-flex-middle uk-margin-small" uk-grid>
    <div class="uk-width-auto">
      <label class="uk-form-label uk-margin-remove" for="treeDomainSelect">
        Startseite-Domain
      </label>
    </div>
    <div class="uk-width-1-1 uk-width-medium@m">
      <select id="treeDomainSelect" class="uk-select uk-form-small" data-tree-domain-select>
        {% for option in startpage_domain_options|default([]) %}
          <option
            value="{{ option.value|default('')|e('html_attr') }}"
            {% if option.value|default('') == startpage_selected_domain|default('') %}selected{% endif %}
          >
            {{ option.label|default(option.value|default('Namespace-weit')) }}
            {% if option.is_unassigned|default(false) %} (nicht zugewiesen){% endif %}
            {% if not option.is_active|default(true) %} (inaktiv){% endif %}
          </option>
        {% endfor %}
      </select>
    </div>
  </div>
  {% endif %}
  <div
    class="page-tree"
    data-page-tree
    data-endpoint="{{ basePath }}/admin/projects/tree"
    data-initial-payload="{{ project_tree_payload|default([])|json_encode|e('html_attr') }}"
    data-namespace="{{ pageNamespace|default('default')|e('html_attr') }}"
    data-empty="Keine Seiten vorhanden."
    data-error="Seitenbaum konnte nicht geladen werden."
    data-startpage-id="{{ startpage_page_id|default('')|e('html_attr') }}"
    data-startpage-domain="{{ startpage_selected_domain|default('')|e('html_attr') }}"
    data-startpage-domain-options="{{ startpage_domain_options|default([])|json_encode|e('html_attr') }}"
    data-startpage-map="{{ startpage_map|default({})|json_encode|e('html_attr') }}"
    data-has-domain-namespace="{{ hasDomainNamespace|default(false) ? '1' : '0' }}"
  >
    <div class="uk-text-meta" data-page-tree-loading>Seitenbaum wird geladen…</div>
  </div>
</div>
