{% set newsEntries = entries|default([]) %}
{% set newsStatus = status|default('') %}
{% set token = csrfToken|default('') %}
{% set pageNamespace = pageNamespace|default('') %}
{% set namespaceQuery = pageNamespace is not empty ? '?namespace=' ~ pageNamespace|url_encode : '' %}

{% if newsStatus == 'created' %}
  <div class="uk-alert-success" uk-alert>{{ t('message_news_created') }}</div>
{% elseif newsStatus == 'updated' %}
  <div class="uk-alert-success" uk-alert>{{ t('message_news_updated') }}</div>
{% elseif newsStatus == 'deleted' %}
  <div class="uk-alert-success" uk-alert>{{ t('message_news_deleted') }}</div>
{% endif %}

<div class="uk-overflow-auto uk-margin-top admin-table-wrapper">
  <table class="uk-table uk-table-divider uk-table-striped">
    <thead>
      <tr>
        <th>{{ t('column_title') }}</th>
        <th>{{ t('column_page') }}</th>
        <th>{{ t('column_status') }}</th>
        <th>{{ t('column_published') }}</th>
        <th>{{ t('column_actions') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in newsEntries %}
        <tr>
          <td>{{ entry.title }}</td>
          <td>{{ entry.pageTitle }}</td>
          <td>
            {% if entry.isPublished %}
              <span class="uk-label uk-label-success">{{ t('status_published') }}</span>
            {% else %}
              <span class="uk-label">{{ t('status_draft') }}</span>
            {% endif %}
          </td>
          <td>
            {% if entry.publishedAt %}
              {{ entry.publishedAt|date('d.m.Y H:i') }}
            {% else %}
              &mdash;
            {% endif %}
          </td>
          <td class="uk-table-shrink">
            <div class="uk-inline">
              <button
                class="uk-button uk-button-default uk-button-small"
                type="button"
                uk-icon="icon: more; ratio: 0.9"
                aria-label="{{ t('column_actions') }}"
              >
                <span class="uk-hidden">{{ t('column_actions') }}</span>
              </button>
              <div uk-dropdown="mode: click; pos: bottom-right; offset: 0; container: .admin-page">
                <ul class="uk-nav uk-dropdown-nav">
                  <li>
                    <a href="{{ basePath }}/admin/landing-news/{{ entry.id }}{{ namespaceQuery }}" uk-dropdown-close>{{ t('action_edit') }}</a>
                  </li>
                  <li class="uk-nav-divider"></li>
                  <li>
                    <form method="post" action="{{ basePath }}/admin/landing-news/{{ entry.id }}/delete{{ namespaceQuery }}" onsubmit="return confirm('{{ t('confirm_news_delete') }}');">
                      <input type="hidden" name="_token" value="{{ token }}">
                      <button type="submit" class="uk-button uk-button-link uk-text-danger uk-width-1-1 uk-text-left" uk-dropdown-close>{{ t('action_delete') }}</button>
                    </form>
                  </li>
                </ul>
              </div>
            </div>
          </td>
        </tr>
      {% else %}
        <tr>
          <td colspan="5" class="uk-text-center">{{ t('message_news_empty') }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
