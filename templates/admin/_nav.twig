{% set event_uid = event.uid|default('') %}
{% set eventSuffix = event_uid ? ('?event=' ~ event_uid) : '' %}
{% set groups = [
  {
    items: [
      { href: basePath ~ '/admin/dashboard', icon: 'home', text: t('tab_dashboard') },
    ]
  },
  {
    header: t('menu_event'),
    items: [
      { href: basePath ~ '/admin/events', icon: 'calendar', text: t('tab_events') },
      { href: basePath ~ '/admin/event/settings', icon: 'cog', text: t('tab_event_settings') },
      { href: basePath ~ '/admin/summary', icon: 'table', text: t('tab_summary') },
    ]
  },
  {
    header: t('menu_content'),
    items: [
      { href: basePath ~ '/admin/catalogs', icon: 'database', text: t('tab_catalogs') },
      { href: basePath ~ '/admin/questions', icon: 'question', text: t('tab_questions') },
      { href: basePath ~ '/admin/pages', icon: 'file-edit', text: t('tab_pages'), admin: true },
    ]
  },
  {
    header: t('menu_teams'),
    items: [
      { href: basePath ~ '/admin/teams', icon: 'users', text: t('tab_teams') },
    ]
  },
  {
    header: t('menu_evaluation'),
    items: [
      { href: basePath ~ '/admin/results', icon: 'list', text: t('tab_results') },
      { href: basePath ~ '/admin/statistics', icon: 'signal', text: t('tab_statistics') },
    ]
  },
  {
    header: t('menu_account'),
    items: [
      { href: basePath ~ '/admin/profile', icon: 'user', text: t('tab_profile'), noEvent: true },
      { href: basePath ~ '/admin/subscription', icon: 'credit-card', text: t('tab_subscription'), noEvent: true },
    ]
  },
  {
    header: t('menu_admin'),
    admin: true,
    items: [
      { href: basePath ~ '/admin/management', icon: 'cog', text: t('tab_management'), noEvent: true },
      { href: basePath ~ '/admin/logs', icon: 'history', text: t('tab_logs'), noEvent: true },
      { href: basePath ~ '/admin/tenants', icon: 'users', text: t('tab_tenants'), domain: 'main', noEvent: true },
    ]
  },
] %}
{% set current = currentPath %}
<ul class="uk-nav uk-nav-default">
  {% for group in groups %}
    {% if group.header is defined %}
      {% if group.admin is not defined or role == 'admin' %}
        <li class="uk-nav-header">{{ group.header }}</li>
        {% for it in group.items %}
          {% if (it.admin is not defined or role == 'admin') and (it.domain is not defined or it.domain == domainType) %}
            {% set active = current starts with it.href ? 'uk-active' : '' %}
            <li class="{{ active }}">
              <a href="{{ it.href ~ (it.noEvent ? '' : eventSuffix) }}">
                <span uk-icon="icon: {{ it.icon }}; ratio: 0.95"></span>
                <span class="qr-nav-text">{{ it.text }}</span>
              </a>
            </li>
          {% endif %}
        {% endfor %}
      {% endif %}
    {% else %}
      {% for it in group.items %}
        {% if (it.admin is not defined or role == 'admin') and (it.domain is not defined or it.domain == domainType) %}
          {% set active = current starts with it.href ? 'uk-active' : '' %}
          <li class="{{ active }}">
            <a href="{{ it.href ~ (it.noEvent ? '' : eventSuffix) }}">
              <span uk-icon="icon: {{ it.icon }}; ratio: 0.95"></span>
              <span class="qr-nav-text">{{ it.text }}</span>
            </a>
          </li>
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endfor %}
  <li class="uk-nav-divider"></li>
  <li>
    <a href="{{ basePath }}/logout">
      <span uk-icon="icon: sign-out; ratio: 0.95"></span>
      <span class="qr-nav-text">{{ t('logout') }}</span>
    </a>
  </li>
</ul>
