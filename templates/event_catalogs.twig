{% extends 'layout.twig' %}

{% block title %}{{ event.name }}{% endblock %}

{% block head %}
  <meta name="csrf-token" content="{{ csrf_token }}">
  <link rel="stylesheet" href="{{ basePath }}/css/main.css">
  {% set cfg = config is defined ? config : {} %}
  <link rel="stylesheet" href="{{ basePath }}/css/dark.css" media="all">
  <link rel="stylesheet" href="{{ basePath }}/css/highcontrast.css">
{% endblock %}

{% block body_class %}uk-padding{% endblock %}

{% block body %}
  {% embed 'topbar.twig' %}{% endembed %}
  <div class="uk-container uk-container-large">
    <h1 class="uk-heading-small uk-heading-medium@m uk-text-center uk-text-light">{{ event.name }}</h1>
    <div class="uk-text-center uk-margin">
      <img class="logo-placeholder"
           src="{% if config.logoPath %}{{ basePath ~ config.logoPath }}{% else %}{{ basePath }}/logo-160.svg{% endif %}"
           {% if not config.logoPath %}
           srcset="{{ basePath }}/logo-160.svg 160w, {{ basePath }}/logo-320.svg 320w"
           sizes="(max-width: 600px) 160px, 320px"
           {% endif %}
           alt="Logo" width="160" height="240" loading="lazy">
    </div>
    {% if event.description %}
      <p class="uk-text-lead uk-text-center">{{ event.description }}</p>
    {% endif %}
    {% if event.comment %}
      <div class="uk-text-center uk-margin">{{ event.comment|raw }}</div>
    {% endif %}
    <div class="uk-child-width-1-1 uk-child-width-1-2@s uk-child-width-1-3@m uk-grid-small" uk-grid uk-height-match="target: > div > .uk-card">
      {% for cat in catalogs %}
        {% set key = cat.slug ?? cat.uid ?? cat.sort_order ?? cat.id %}
        <div>
          <div class="uk-card uk-card-default uk-card-hover catalog-card qr-card" tabindex="0" data-start-url="{{ basePath }}/?event={{ event.uid }}&katalog={{ key|url_encode }}">
            <div class="uk-card-body">
              <h3 class="uk-card-title">{{ cat.name ?? key }}</h3>
              {% if cat.description %}
                <p>{{ cat.description }}</p>
              {% endif %}
              {% if cat.comment %}
                <p>{{ cat.comment|raw }}</p>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="{{ basePath }}/js/custom-icons.js" defer></script>
  <script src="{{ basePath }}/js/storage.js" defer></script>
  <script src="{{ basePath }}/js/catalog-grid.js" defer></script>
{% endblock %}
