{% extends 'layout.twig' %}

{% block title %}{{ config.pageTitle|default('Modernes Quiz mit UIkit') }}{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ basePath }}/css/dark.css">
  <link rel="stylesheet" href="{{ basePath }}/css/main.css">
  <link rel="stylesheet" href="{{ basePath }}/css/highcontrast.css">
  <link rel="stylesheet" href="{{ basePath }}/css/calhelp.css">
{% endblock %}

{% block body_class %}index-page uk-padding{% endblock %}

{% block body %}
  {% embed 'topbar.twig' %}
    {% block center %}
      <span id="topbar-title" class="uk-navbar-title uk-text-center" data-default-title="{{ event.name|default('Sommerfest 2025') }}">{{ event.name|default('Sommerfest 2025') }}</span>
    {% endblock %}
    {% block right %}
      <div class="theme-switch">
        <button id="theme-toggle" class="uk-icon-button" uk-icon="icon: moon; ratio: 2" aria-label="{{ t('design_toggle') }}"></button>
      </div>
      <div class="contrast-switch uk-margin-small-left">
        <button id="contrast-toggle" class="uk-icon-button" uk-icon="icon: paint-bucket; ratio: 2" aria-label="{{ t('contrast_toggle') }}"></button>
      </div>
      <a href="faq" class="uk-icon-button uk-margin-small-left" uk-icon="icon: question; ratio: 2" title="{{ t('help') }}" aria-label="{{ t('help') }}"></a>
    {% endblock %}
    {% block headerbar %}
      {% if event.description %}
        <div class="event-header-bar uk-text-center">{{ event.description }}</div>
      {% endif %}
    {% endblock %}
  {% endembed %}
  <div class="uk-container uk-width-1-1 uk-width-1-2@s uk-width-2-3@m">
    <div class="uk-card uk-card-default uk-card-body uk-box-shadow-large uk-margin" uk-scrollspy="cls: uk-animation-fade">
      <div id="quiz-header" class="uk-text-center uk-margin" uk-scrollspy="cls: uk-animation-scale-up; delay: 100">
        <img id="quiz-logo" class="logo-placeholder"
             src="{% if config.logoPath %}{{ basePath ~ config.logoPath }}{% else %}{{ basePath }}/logo-160.svg{% endif %}"
             {% if not config.logoPath %}
             srcset="{{ basePath }}/logo-160.svg 160w, {{ basePath }}/logo-320.svg 320w"
             sizes="(max-width: 600px) 160px, 320px"
             {% endif %}
             alt="Logo" width="160" height="240" loading="lazy">
      </div>
      <progress id="progress" class="uk-progress" value="0" max="1" aria-label="{{ t('quiz_progress') }}" aria-valuenow="0" uk-scrollspy="cls: uk-animation-fade; delay: 200"></progress>
      <span id="question-announcer" class="uk-hidden-visually" aria-live="polite"></span>
      <div id="quiz" uk-scrollspy="cls: uk-animation-slide-bottom-small; delay: 300"></div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="{{ basePath }}/js/custom-icons.js" defer></script>
  <script src="https://unpkg.com/html5-qrcode@2.3.7/html5-qrcode.min.js" defer></script>
  <script>
    window.quizConfig = {{ config|json_encode|raw }};
  </script>
  <script id="catalogs-data" type="application/json">
    {{ catalogs|json_encode|raw }}
  </script>
  <script src="{{ basePath }}/js/catalog.js" defer></script>
  <script src="{{ basePath }}/js/confetti.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js" defer></script>
  <script src="{{ basePath }}/js/quiz.js" defer></script>
  <script src="{{ basePath }}/js/app.js" defer></script>
{% endblock %}
