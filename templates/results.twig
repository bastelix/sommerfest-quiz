{% extends 'layout.twig' %}

{% block title %}Ergebnisse{% endblock %}

{% block head %}
  <link rel="stylesheet" href="/css/main.css">
{% endblock %}

{% block body_class %}uk-background-muted uk-padding{% endblock %}

{% block body %}
  {% embed 'topbar.twig' %}
    {% block left %}
      <a href="/admin" class="uk-icon-button" uk-icon="icon: arrow-left; ratio: 2" title="Zurück" aria-label="Zurück"></a>
    {% endblock %}
  {% endembed %}
  <div class="uk-container uk-container-small">
    <div class="uk-flex uk-flex-between uk-flex-middle">
      <h2 class="uk-heading-bullet">Ergebnisse</h2>
      <button id="resultsRefreshBtn" class="uk-icon-button" uk-icon="icon: refresh; ratio: 1.2" title="Aktualisieren" aria-label="Aktualisieren"></button>
    </div>
    <table class="uk-table uk-table-divider">
      <thead>
        <tr><th>Name</th><th>Versuch</th><th>Katalog</th><th>Richtige</th><th>Zeit</th><th>Rätselwort gelöst</th><th>Beweisfoto</th></tr>
      </thead>
      <tbody id="resultsTableBody">
        {% for r in results %}
        <tr>
          <td>{{ r.name }}</td>
          <td>{{ r.attempt }}</td>
          <td>{{ r.catalog }}</td>
          <td>{{ r.correct }}/{{ r.total }}</td>
          <td>{{ r.time | date('Y-m-d H:i') }}</td>
          <td>{% if r.puzzleTime is defined %}{{ r.puzzleTime | date('Y-m-d H:i') }}{% endif %}</td>
          <td>{% if r.photo is defined and r.photo %}<img src="{{ r.photo }}" alt="Beweisfoto" class="proof-thumb">{% endif %}</td>
        </tr>
        {% else %}
        <tr><td colspan="7">Keine Daten</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}

{% block scripts %}
  <script src="/js/uikit-icons.min.js"></script>
  <script src="/js/app.js"></script>
  <script src="/js/results.js"></script>
{% endblock %}
