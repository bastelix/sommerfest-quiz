{% extends 'layout.twig' %}

{% block title %}Quiz Verwaltung{% endblock %}

{% block head %}
  <link rel="stylesheet" href="/css/dark.css">
  <link rel="stylesheet" href="/css/main.css">
{% endblock %}

{% block body_class %}uk-background-muted uk-padding{% endblock %}

{% block body %}
  <div class="uk-flex uk-flex-between uk-margin-small-bottom">
    <a href="." class="uk-icon-button" uk-icon="icon: arrow-left; ratio: 2" title="Zurück" aria-label="Zurück"></a>
    <div class="theme-switch">
      <button id="theme-toggle" class="uk-icon-button" uk-icon="icon: moon; ratio: 2" aria-label="Design wechseln"></button>
    </div>
  </div>
  <ul uk-tab>
    <li class="uk-active"><a href="#">Veranstaltung konfigurieren</a></li>
    <li><a href="#">Teams/Personen</a></li>
    <li><a href="#">Fragen anpassen</a></li>
    <li><a href="#">Ergebnisse</a></li>
  </ul>
  <ul class="uk-switcher uk-margin">
    <li>
      <div class="uk-container uk-container-large">
        <h2 class="uk-heading-bullet">Veranstaltung konfigurieren</h2>
        <form id="configForm" class="uk-form-stacked">
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgLogoPath">Logo Pfad</label>
            <div class="uk-form-controls"><input class="uk-input" type="text" id="cfgLogoPath"></div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgPageTitle">Titel im Browser-Tab</label>
            <div class="uk-form-controls"><input class="uk-input" type="text" id="cfgPageTitle"></div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgHeader">Überschrift</label>
            <div class="uk-form-controls"><input class="uk-input" type="text" id="cfgHeader"></div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgSubheader">Untertitel</label>
            <div class="uk-form-controls"><input class="uk-input" type="text" id="cfgSubheader"></div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgBackgroundColor">Hintergrundfarbe</label>
            <div class="uk-form-controls"><input class="uk-input" type="text" id="cfgBackgroundColor"></div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgButtonColor">Buttonfarbe</label>
            <div class="uk-form-controls"><input class="uk-input" type="text" id="cfgButtonColor"></div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgCheckAnswerButton">Antwort-Prüfen-Button anzeigen</label>
            <div class="uk-form-controls">
              <select class="uk-select" id="cfgCheckAnswerButton">
                <option value="yes">Ja</option>
                <option value="no">Nein</option>
              </select>
            </div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label" for="cfgQRUser">QR-Code-Login verwenden</label>
            <div class="uk-form-controls">
              <select class="uk-select" id="cfgQRUser">
                <option value="false">Nein</option>
                <option value="true">Ja</option>
              </select>
            </div>
          </div>
        </form>
        <div class="uk-margin uk-flex uk-flex-between">
          <button id="cfgResetBtn" class="uk-button uk-button-default">Zurücksetzen</button>
          <button id="cfgSaveBtn" class="uk-button uk-button-primary">Speichern</button>
        </div>

      </div>
    </li>
    <li>
      <div class="uk-container uk-container-small">
        <h2 class="uk-heading-bullet">Teams/Personen</h2>
        <div id="teamsList" class="uk-margin"></div>
        <div class="uk-margin">
          <button id="teamAddBtn" class="uk-button uk-button-default">Hinzufügen</button>
        </div>
        <div class="uk-margin">
          <label><input class="uk-checkbox" type="checkbox" id="teamRestrict"> Nur Teams/Personen aus der Liste dürfen teilnehmen.</label>
        </div>
        <div class="uk-margin">
          <button id="teamsSaveBtn" class="uk-button uk-button-primary">Speichern</button>
        </div>
      </div>
    </li>
    <li>
      <div class="uk-container uk-container-large">
        <h2 class="uk-heading-bullet">Fragen bearbeiten</h2>
        <div class="uk-margin">
          <label class="uk-form-label" for="catalogSelect">Fragenkatalog</label>
          <div class="uk-form-controls">
            <select id="catalogSelect" class="uk-select"></select>
          </div>
        </div>
        <div id="questions"></div>
        <div class="uk-margin">
          <button id="addBtn" class="uk-button uk-button-default">Neue Frage</button>
        </div>
        <div class="uk-margin uk-flex uk-flex-between">
          <button id="resetBtn" class="uk-button uk-button-default">Zurücksetzen</button>
          <button id="saveBtn" class="uk-button uk-button-primary">Speichern</button>
        </div>

      </div>
    </li>
    <li>
      <div class="uk-container uk-container-small">
        <h2 class="uk-heading-bullet">Ergebnisse</h2>
        <table class="uk-table uk-table-divider">
          <thead>
            <tr><th>Name</th><th>Versuch</th><th>Katalog</th><th>Richtige</th></tr>
          </thead>
          <tbody>
            {% for r in results %}
            <tr>
              <td>{{ r.name }}</td>
              <td>{{ r.attempt }}</td>
              <td>{{ r.catalog }}</td>
              <td>{{ r.correct }}/{{ r.total }}</td>
            </tr>
            {% else %}
            <tr><td colspan="4">Keine Daten</td></tr>
            {% endfor %}
          </tbody>
        </table>
        <div class="uk-margin uk-flex uk-flex-between">
          <button id="resultsResetBtn" class="uk-button uk-button-default">Zurücksetzen</button>
          <button id="resultsDownloadBtn" class="uk-button uk-button-primary">Herunterladen</button>
        </div>
      </div>
    </li>
  </ul>
{% endblock %}

{% block scripts %}
  <script src="/js/uikit-icons.min.js"></script>
  <script src="/js/custom-icons.js"></script>
  <script>
    window.quizConfig = {{ config|json_encode|raw }};
  </script>
  <script src="/js/admin.js"></script>
  <script src="/js/app.js"></script>
{% endblock %}
