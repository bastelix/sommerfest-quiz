{# Renders the "latest-news" page module.
   Expects: module (PageModule), landingNews (array), landingNewsBasePath (string|null).
   Config keys: heading (string), limit (int), showAllLink (bool). #}
{% set moduleConfig = module.config|default({}) %}
{% set newsHeading = moduleConfig.heading|default('Neuigkeiten') %}
{% set newsLimit = moduleConfig.limit|default(3) %}
{% set showAllLink = moduleConfig.showAllLink is defined ? moduleConfig.showAllLink : true %}
{% set newsItems = landingNews|default([]) %}

{% if newsItems %}
  {% set displayItems = newsItems|slice(0, newsLimit) %}
  <section class="marketing-section uk-section uk-section-muted marketing-news page-module-latest-news"
           data-page-module-id="{{ module.id|e('html_attr') }}"
           data-page-module-type="latest-news">
    <div class="uk-container">
      <div class="uk-flex uk-flex-between uk-flex-middle uk-margin-bottom">
        <h2 class="uk-heading-medium uk-margin-remove">{{ newsHeading }}</h2>
        {% if showAllLink and landingNewsIndexUrl is defined and landingNewsIndexUrl %}
          <a class="uk-button uk-button-text" href="{{ landingNewsIndexUrl }}">Alle News</a>
        {% endif %}
      </div>
      <div class="uk-grid-small uk-child-width-1-1 uk-child-width-1-3@m" uk-grid>
        {% for item in displayItems %}
          <div>
            {% include 'marketing/_news_teaser.twig' with {
              entry: item,
              newsBasePath: landingNewsBasePath|default(null)
            } %}
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
{% endif %}
