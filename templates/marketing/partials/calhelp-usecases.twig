{% set usecasePayload = calhelpUsecases is defined ? calhelpUsecases : null %}
{% if usecasePayload and usecasePayload.usecases is iterable and usecasePayload.usecases|length > 0 %}
  {% set localeKey = locale() == 'en' ? 'en' : 'de' %}
  {% set heading = usecasePayload.heading[localeKey]|default(usecasePayload.heading['de']|default('Use cases')) %}
  {% set intro = usecasePayload.intro[localeKey]|default(usecasePayload.intro['de']|default('')) %}
  <section id="usecases" class="uk-section uk-section-muted calhelp-section calhelp-usecases-section" aria-labelledby="usecases-title">
    <div class="uk-container">
      <div class="calhelp-section__header">
        <h2 id="usecases-title" class="uk-heading-medium">{{ heading }}</h2>
        {% if intro %}
          <p class="uk-text-lead">{{ intro }}</p>
        {% endif %}
      </div>
      <div class="uk-grid-large uk-child-width-1-3@m uk-grid-match" data-uk-grid>
        {% for case in usecasePayload.usecases %}
          {% set title = case.title[localeKey]|default(case.title['de']|default('')) %}
          {% set tagline = case.tagline[localeKey]|default(case.tagline['de']|default('')) %}
          {% set story = case.story[localeKey]|default(case.story['de']|default('')) %}
          {% set result = case.result[localeKey]|default(case.result['de']|default('')) %}
          <article class="uk-card uk-card-primary uk-card-body calhelp-card calhelp-usecase-card" aria-labelledby="usecase-{{ case.id|default(loop.index) }}-title">
            <h3 id="usecase-{{ case.id|default(loop.index) }}-title" class="uk-card-title">
              {{ title }}{% if tagline %} â€“ {{ tagline }}{% endif %}
            </h3>
            {% if story %}
              <p>{{ story }}</p>
            {% endif %}
            {% if result %}
              <p class="uk-text-emphasis">{{ result }}</p>
            {% endif %}
          </article>
        {% endfor %}
      </div>
    </div>
  </section>
{% endif %}
