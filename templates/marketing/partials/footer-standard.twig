{#
  Shared footer structure for marketing pages.

  Parameters:
    brandName          – Brand title shown in the "about" section (required)
    brandDescription   – Short brand tagline (string, may contain HTML entities)
    contactName        – Contact person or company name
    contactEmailUser   – User part of obfuscated email (e.g. "office")
    contactEmailDomain – Domain part of obfuscated email (e.g. "calhelp.de")
    contactPhone       – Phone number href value (e.g. "+4933203609080")
    contactPhoneLabel  – Formatted phone display (e.g. "+49 33203 609080")
    contactExtra       – Extra HTML appended inside the contact section (raw)
    contactId          – Optional HTML id for the contact section
    navigationTitle    – Heading for the navigation column (default: "Navigation")
    footerColumns      – CMS footer column data for render_columns()
    extraNavLinks      – Array of {href, label, target?, rel?} appended after columns
    legalNavigation    – CMS legal navigation items for render_links()
    extraLegalLinks    – Array of {href, label} appended after legal links
    wrapperClass       – Optional class for an outer wrapper div
#}
{% import 'marketing/partials/footer-menu.twig' as footerMenu %}

{% set brandName = brandName|default('') %}
{% set brandDescription = brandDescription|default('') %}
{% set contactName = contactName|default('') %}
{% set contactEmailUser = contactEmailUser|default('') %}
{% set contactEmailDomain = contactEmailDomain|default('') %}
{% set contactPhone = contactPhone|default('') %}
{% set contactPhoneLabel = contactPhoneLabel|default('') %}
{% set contactExtra = contactExtra|default('') %}
{% set contactId = contactId|default('') %}
{% set navigationTitle = navigationTitle|default('Navigation') %}
{% set footerColumns = footerColumns|default([]) %}
{% set extraNavLinks = extraNavLinks|default([]) %}
{% set legalNavigation = legalNavigation|default([]) %}
{% set extraLegalLinks = extraLegalLinks|default([]) %}
{% set wrapperClass = wrapperClass|default('') %}

{% if wrapperClass %}<div class="{{ wrapperClass }}">{% endif %}
<div class="footer-columns">
  {% if brandName %}
    <div class="footer-section footer-about">
      <strong>{{ brandName }}</strong>
      {% if brandDescription %}<p>{{ brandDescription|raw }}</p>{% endif %}
    </div>
  {% endif %}

  {% if contactName or contactEmailUser %}
    <div class="footer-section footer-contact"{% if contactId %} id="{{ contactId }}"{% endif %}>
      <strong>Kontakt</strong>
      <p>
        {{ contactName }}
        {%- if contactEmailUser and contactEmailDomain -%}
          <br>
          <a class="js-email-link"
             data-user="{{ contactEmailUser }}"
             data-domain="{{ contactEmailDomain }}"
             href="#">{{ contactEmailUser }} [at] {{ contactEmailDomain }}</a>
        {%- endif -%}
        {%- if contactPhone -%}
          <br>
          <a href="tel:{{ contactPhone }}">{{ contactPhoneLabel|default(contactPhone) }}</a>
        {%- endif -%}
      </p>
      {{ contactExtra|raw }}
    </div>
  {% endif %}

  {% if footerColumns or extraNavLinks %}
    <div class="footer-section footer-navigation">
      <strong>{{ navigationTitle }}</strong>
      {% if footerColumns %}
        {{ footerMenu.render_columns(
          footerColumns,
          'footer-navigation-grid uk-grid-small uk-child-width-1-1 uk-child-width-1-3@m',
          'footer-navigation-column',
          'uk-grid'
        ) }}
      {% endif %}
      {% if extraNavLinks %}
        <ul>
          {% for link in extraNavLinks %}
            <li>
              <a href="{{ link.href }}"
                {%- if link.target|default('') %} target="{{ link.target }}"{% endif %}
                {%- if link.rel|default('') %} rel="{{ link.rel }}"{% endif %}>
                {{ link.label }}
              </a>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  {% endif %}

  {% if legalNavigation or extraLegalLinks %}
    <div class="footer-section footer-legal">
      <strong>Rechtliches</strong>
      {{ footerMenu.render_links(legalNavigation) }}
      {% if extraLegalLinks %}
        <ul>
          {% for link in extraLegalLinks %}
            <li><a href="{{ link.href }}">{{ link.label }}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  {% endif %}
</div>
{% if wrapperClass %}</div>{% endif %}
