{% extends 'layout.twig' %}

{% import 'marketing/partials/menu.twig' as menu %}
{% set cmsMainNavigation = cmsMainNavigation|default([]) %}
{% set menuItems = cmsMainNavigation is not empty ? cmsMainNavigation : cmsMenuItems|default([]) %}

{% block title %}{{ metaTitle|default('QuizRace – Marketingseite') }}{% endblock %}

{% block head %}
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
  <link rel="preload" href="{{ basePath }}/css/marketing.css" as="style">
  <link rel="stylesheet" href="{{ basePath }}/css/marketing.css">
  <link rel="stylesheet" href="{{ basePath }}/css/highcontrast.css">
  <link rel="stylesheet" href="{{ basePath }}/css/topbar.marketing.css">
  <meta name="page-name" content="Marketing default">
  <script type="module" src="{{ basePath }}/js/marketing-design.js"></script>
{% endblock %}

{% block body_class %}marketing-page generic-marketing uk-background-default{% endblock %}

{% block body %}
  {% include 'marketing/partials/design-data.twig' %}
  <div class="marketing-layout">
    {% set logoSettings = headerLogo|default({}) %}
    {% set logoMode = logoSettings.mode|default('text') %}
    {% set logoSrc = logoSettings.src|default(null) %}
    {% set logoLabel = logoSettings.label|default(metaTitle|default('QuizRace')) %}
    {% set logoAlt = logoSettings.alt|default(logoLabel) %}

    <header class="qr-topbar uk-position-sticky uk-top"
            uk-sticky="animation: uk-animation-slide-top; sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky;">
      <nav class="uk-navbar-container uk-padding-small topbar" role="navigation" aria-label="Hauptnavigation" uk-navbar>
        <div class="uk-navbar-left">
          <div class="uk-navbar-item">
            <button id="offcanvas-toggle"
                    class="uk-navbar-toggle uk-hidden@m git-btn"
                    uk-navbar-toggle-icon
                    uk-toggle="target: #qr-offcanvas"
                    aria-controls="qr-offcanvas"
                    aria-expanded="false"
                    aria-label="Menü"></button>
            <a class="uk-logo" href="{{ basePath }}/{{ marketingSlug|default('') }}">
              {% if logoMode == 'image' and logoSrc %}
                <img src="{{ logoSrc }}" alt="{{ logoAlt }}">
              {% else %}
                {{ logoLabel }}
              {% endif %}
            </a>
          </div>
        </div>
        <div class="uk-navbar-right">
          {{ menu.render_menu(menuItems, 'uk-navbar-nav uk-visible@m', 'uk-dropdown="offset: 20; delay-hide: 150; pos: bottom-left"') }}
          <a class="uk-navbar-item btn btn-black top-cta uk-visible@m"
             href="https://quizrace.app/?event=98e5abe1-f80a-4241-8d03-a154ae2f6cb0&amp;katalog=DFB-QUIZ"
             target="_blank"
             rel="noopener">
            <span class="uk-margin-small-right" uk-icon="icon: play"></span>Jetzt Demo starten
          </a>
          {% include 'components/config-menu.twig' with {
            show_help: false,
            show_language: headerConfig.show_language|default(true),
            show_theme_toggle: headerConfig.show_theme_toggle|default(true),
            show_contrast_toggle: headerConfig.show_contrast_toggle|default(true)
          } %}
        </div>
      </nav>
    </header>

    <div id="qr-offcanvas" data-uk-offcanvas="overlay: true; flip: true">
      <div class="uk-offcanvas-bar">
        <button class="uk-offcanvas-close git-btn" type="button" data-uk-close aria-label="Menü schließen"></button>
        {{ menu.render_offcanvas(menuItems, 'uk-nav uk-nav-default') }}
        <a class="uk-button uk-button-default git-btn uk-width-1-1 uk-margin-top offcanvas-cta"
           href="https://quizrace.app/?event=98e5abe1-f80a-4241-8d03-a154ae2f6cb0&amp;katalog=DFB-QUIZ"
           target="_blank"
           rel="noopener">
          <span class="uk-margin-small-right" uk-icon="icon: play"></span>Jetzt Demo starten
        </a>
      </div>
    </div>

    {% include 'marketing/partials/page-modules.twig' with {
      modules: pageModules['before-content']|default([]),
      position: 'before-content'
    } %}

    <main class="marketing-content uk-section">
      <div class="uk-container">
        {% include 'marketing/partials/block-content.twig' %}
      </div>
    </main>

    {% include 'marketing/partials/page-modules.twig' with {
      modules: pageModules['after-content']|default([]),
      position: 'after-content'
    } %}

    {% if landingNews is defined and landingNews %}
      <section id="landing-news" class="marketing-section uk-section uk-section-muted">
        <div class="uk-container">
          <div class="uk-flex uk-flex-between uk-flex-middle uk-margin-bottom">
            <h2 class="uk-heading-medium uk-margin-remove">Neuigkeiten</h2>
            {% if landingNewsIndexUrl is defined and landingNewsIndexUrl %}
              <a class="uk-button uk-button-text" href="{{ landingNewsIndexUrl }}">Alle News</a>
            {% endif %}
          </div>
          <div class="uk-grid-small uk-child-width-1-1 uk-child-width-1-3@m" data-uk-grid>
            {% for item in landingNews %}
              <div>
                {% include 'marketing/_news_teaser.twig' with {
                  entry: item,
                  newsBasePath: landingNewsBasePath
                } %}
              </div>
            {% endfor %}
          </div>
        </div>
      </section>
    {% endif %}
  </div>
{% endblock %}
