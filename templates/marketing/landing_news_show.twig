{% extends 'layout.twig' %}

{% set newsBaseSlug = newsOwnerBaseSlug|default(page.slug) %}
{% set isCalserverTheme = newsBaseSlug == 'calserver' %}

{% block title %}{{ metaTitle|default(entry.title ~ ' – Neuigkeiten') }}{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ basePath }}/css/dark.css" media="all">
  <link rel="stylesheet" href="{{ basePath }}/css/highcontrast.css">
  <link rel="stylesheet" href="{{ basePath }}/css/sections.css">
  <link rel="stylesheet" href="{{ basePath }}/css/marketing-utilities.css">
  <link rel="preload" href="{{ basePath }}/css/marketing.css" as="style">
  <link rel="stylesheet" href="{{ basePath }}/css/marketing.css">
  <link rel="stylesheet" href="{{ basePath }}/css/marketing-cards.css">
  <link rel="stylesheet" href="{{ basePath }}/css/topbar.marketing.css">
  <script type="module" src="{{ basePath }}/js/marketing-design.js" defer></script>
{% endblock %}

{% block body_class %}marketing-page {% if isCalserverTheme %}calserver-layout calserver-news-page{% else %}dark-mode{% endif %}{% endblock %}

{% block body %}
  {% include 'marketing/partials/design-data.twig' %}
  <div class="marketing-layout">
    {% include 'pages/partials/marketing_topbar.twig' with {
      cmsMenuItems: cmsMainNavigation|default([]),
      cmsMainNavigation: cmsMainNavigation|default([]),
      headerLogo: headerLogo|default({}),
      headerTheme: design.theme|default('light'),
      headerConfig: headerConfig|default({}),
      basePath: basePath,
      cmsSlug: cmsSlug|default(newsOwnerSlug|default(page.slug)),
      pageTitle: page.title|default('QuizRace')
    } only %}

    {% if breadcrumbs is defined and breadcrumbs %}
      <nav aria-label="Breadcrumb" class="uk-container uk-margin-small-top">
        <ul class="uk-breadcrumb">
          {% for crumb in breadcrumbs %}
            <li{% if loop.last %} class="uk-active" aria-current="page"{% endif %}>
              {% if not loop.last and crumb.url %}
                <a href="{{ crumb.url }}">{{ crumb.label }}</a>
              {% else %}
                <span>{{ crumb.label }}</span>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </nav>
    {% endif %}

    {% set sectionId = isCalserverTheme ? 'calserver-news' : 'landing-news' %}
    {% set sectionClasses = 'marketing-section uk-section uk-section-default marketing-news' %}
    {% if isCalserverTheme %}
      {% set sectionClasses = 'marketing-section uk-section uk-section-muted marketing-news calserver-news calserver-news--detail' %}
    {% endif %}
    <section id="{{ sectionId }}" class="{{ sectionClasses }}">
      <div class="uk-container uk-container-small">
        <article class="marketing-news-entry uk-article{% if isCalserverTheme %} calserver-news-entry{% endif %}">
          <h1 class="uk-article-title">{{ entry.title }}</h1>
          {% if entry.publishedAt %}
            <p class="uk-article-meta">Veröffentlicht am {{ entry.publishedAt|date('d.m.Y') }}</p>
          {% endif %}
          {% if entry.excerpt %}
            <div class="marketing-news-entry__excerpt uk-text-lead">{{ entry.excerpt|raw }}</div>
          {% endif %}
          <div class="marketing-news-entry__content uk-margin-top">{{ entry.content|raw }}</div>
        </article>
      </div>
    </section>
  </div>
{% endblock %}
