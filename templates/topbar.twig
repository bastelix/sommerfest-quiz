<nav class="uk-navbar-container uk-padding-small topbar" uk-navbar>
  <div class="uk-navbar-left">
    {% block mobile_menu_toggle %}
      <a class="uk-navbar-toggle" href="#offcanvas-nav" uk-toggle aria-label="{{ t('menu') }}">
        <span uk-navbar-toggle-icon></span>
      </a>
    {% endblock %}
    <div class="uk-navbar-item">
      {% block left %}{% endblock %}
    </div>
  </div>
  <div class="uk-navbar-center">
    <div class="uk-navbar-item">
      {% block center %}{% endblock %}
    </div>
  </div>
  <div class="uk-navbar-right">
    <div class="uk-navbar-item">
      {% block right %}{% endblock %}
    </div>
    <a class="uk-navbar-toggle" uk-toggle="target: #settings-offcanvas" aria-label="{{ t('settings') }}">
      <span uk-icon="icon: cog"></span>
    </a>
    <a id="offcanvas-toggle" class="uk-navbar-toggle" hidden uk-toggle="target: #qr-offcanvas" aria-label="{{ t('menu') }}">
      <span uk-navbar-toggle-icon></span>
    </a>
  </div>
</nav>
{% block offcanvas %}
<div id="offcanvas-nav" uk-offcanvas="overlay: true">
  <div class="uk-offcanvas-bar">
    {% block offcanvas_nav %}{% endblock %}
  </div>
</div>
{% endblock %}
{% include 'partials/settings-offcanvas.twig' %}
{% block headerbar %}{% endblock %}
{% block nav_placeholder %}
<div class="nav-placeholder"></div>
{% endblock %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const topbar = document.querySelector('.topbar');
    const navPlaceholder = document.querySelector('.nav-placeholder');

    function updateNavPlaceholder() {
      let height = topbar.offsetHeight;
      const headerBar = document.querySelector('.event-header-bar');
      if (headerBar) {
        height += headerBar.offsetHeight;
      }
      navPlaceholder.style.height = height + 'px';
    }

    if (topbar && navPlaceholder) {
      updateNavPlaceholder();
      if (window.getComputedStyle(topbar).flexWrap !== 'nowrap') {
        window.addEventListener('resize', updateNavPlaceholder);
      }
    }
  });
</script>
