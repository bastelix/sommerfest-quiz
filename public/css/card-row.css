/**
 * card-row – shared sortable-card-row system
 *
 * Used by: question editor, page block editor, footer block editor,
 *          menu cards editor, menu tree editor.
 *
 * Structure per card:
 *   .card-row
 *     .card-row__summary
 *       .card-row__drag
 *       .card-row__badge  (+ badge-{color} utility)
 *       .card-row__info
 *         .card-row__title
 *         .card-row__meta
 *       .card-row__actions
 *         button(.btn-delete | .btn-edit | .btn-duplicate …)
 *     .card-row__edit-area   (hidden by default)
 */

/* ── Container ──────────────────────────────────────────────────── */
.card-row {
  background: var(--surface-card, #fff);
  border: 1px solid var(--border-muted, #dee2e6);
  border-radius: 8px;
  margin-bottom: 0.5rem;
  transition: box-shadow 0.15s ease, border-color 0.15s ease;
}
.card-row:hover {
  border-color: var(--brand-primary, #1e87f0);
  box-shadow: 0 2px 8px rgba(30, 135, 240, 0.1);
}
.card-row:last-child { margin-bottom: 0; }
.card-row--inactive { opacity: 0.5; }
.card-row--editing {
  border-color: var(--brand-primary, #1e87f0);
  box-shadow: 0 2px 12px rgba(30, 135, 240, 0.15);
}

/* ── Summary row ────────────────────────────────────────────────── */
.card-row__summary {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 0.75rem;
}

/* ── Drag handle ────────────────────────────────────────────────── */
.card-row__drag {
  flex-shrink: 0;
  cursor: grab;
  color: var(--border-muted, #ced4da);
  padding: 2px;
  display: flex;
  align-items: center;
  touch-action: none;
}
.card-row__drag:hover { color: var(--text-muted, #868e96); }
.card-row__drag:active { cursor: grabbing; }

/* ── Type badge ─────────────────────────────────────────────────── */
.card-row__badge {
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.65rem;
  font-weight: 700;
  text-transform: uppercase;
  color: #fff;
  letter-spacing: 0;
  background: var(--badge-bg, #868e96);
}

/* Badge colour utilities */
.badge-blue   { --badge-bg: var(--brand-primary,  #1e87f0); }
.badge-green  { --badge-bg: var(--brand-success,  #32d296); }
.badge-red    { --badge-bg: var(--brand-danger,   #f0506e); }
.badge-orange { --badge-bg: var(--brand-warning,  #faa05a); }
.badge-purple { --badge-bg: #7c5cbf; }
.badge-gray   { --badge-bg: #6c757d; }
.badge-muted  { --badge-bg: #868e96; }

/* ── Info block ─────────────────────────────────────────────────── */
.card-row__info {
  flex: 1;
  min-width: 0;
}
.card-row__title {
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--text-body, #212529);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.card-row__meta {
  font-size: 0.7rem;
  color: var(--text-muted, #868e96);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ── Action buttons ─────────────────────────────────────────────── */
.card-row__actions {
  flex-shrink: 0;
  display: flex;
  gap: 2px;
}
.card-row__actions button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  color: var(--text-muted, #868e96);
  line-height: 1;
  transition: color 0.15s ease, background 0.15s ease;
}
.card-row__actions button:hover {
  background: var(--surface-muted, #f1f3f5);
  color: var(--text-body, #212529);
}
.card-row__actions .btn-delete:hover {
  background: color-mix(in srgb, var(--brand-danger, #f0506e) 8%, var(--surface-card, #fff));
  color: var(--brand-danger, #f0506e);
}
.card-row__actions .btn-duplicate:hover {
  background: color-mix(in srgb, var(--brand-primary, #1e87f0) 8%, var(--surface-card, #fff));
  color: var(--brand-primary, #1e87f0);
}
.card-row__actions .btn-edit.is-active {
  background: color-mix(in srgb, var(--brand-primary, #1e87f0) 12%, transparent);
  color: var(--brand-primary, #1e87f0);
}

/* ── Inline edit area ───────────────────────────────────────────── */
.card-row__edit-area {
  border-top: 1px solid var(--border-muted, #dee2e6);
  padding: 0.75rem;
  background: var(--surface-muted, #f8f9fa);
  border-radius: 0 0 8px 8px;
}

/* ── Dark-mode overrides ────────────────────────────────────────── */
[data-theme="dark"] .card-row {
  background: var(--surface-card, #1a1a1a);
  border-color: var(--border-muted, #333);
}
[data-theme="dark"] .card-row:hover {
  border-color: var(--brand-primary, #1e87f0);
}
[data-theme="dark"] .card-row__title { color: var(--text-heading, #e0e0e0); }
[data-theme="dark"] .card-row__meta  { color: var(--text-muted,    #8888a0); }
[data-theme="dark"] .card-row__drag  { color: var(--border-muted,  #555570); }
[data-theme="dark"] .card-row__drag:hover { color: var(--text-muted, #8888a0); }
[data-theme="dark"] .card-row__actions button { color: var(--text-muted, #8888a0); }
[data-theme="dark"] .card-row__actions button:hover {
  background: var(--surface-muted, #2a2a3e);
  color: var(--text-heading, #e0e0e0);
}
[data-theme="dark"] .card-row__actions .btn-delete:hover {
  background: color-mix(in srgb, var(--brand-danger, #f0506e) 15%, var(--surface-card, #1e1e2e));
  color: var(--brand-danger, #f0506e);
}
[data-theme="dark"] .card-row__edit-area {
  background: var(--surface-page, #16161e);
  border-top-color: var(--border-muted, #383850);
}
